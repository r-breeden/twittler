<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" href="stylesheet.css">
  </head>
  <body>
    <span>
      <header>Twittler</header>
    </span>
    <div class="refresh">
      <button>BRING ME MORE TWEETS</button>
    </div>
    <div class="main"></div>
    <script>
    //Two global variables "users" and "streams"
    //users is an array of strings - all the user names you are following
    //streams is an object with two properties, users and home
    //streams.home is an array of all tweets from the users you're following
    //streams.users is an object with properties for each user
    //streams.users.shawndrost has all of shawndrost's tweets

      $(document).ready(function(){
        var userStream = false;

        var $body = $('body');

        //twittler home button
        $('header').on('click', function () {
           window.location.href='index.html';
        });

        //refresh button
        $('.refresh').on('click', 'button', function () {
          window.location.reload();
        });

        //user button
        $('.main').on('click', '.user', function () {
           
           userStream = true; 
           //get user name
           var selectedUser = $(this).html();
           //clear previous stream
           $(".main").empty();
           //show filtered stream by user name
           var index = streams.home.length - 1;
           while(index >= 0){
             var tweet = streams.home[index];
             if('@' + tweet.user === selectedUser){
               
               var $tweet = $('<span></span>');
          
               var user = tweet.user;
               var $user = $('<span class="user"></span>');

               var timeStamp = tweet.created_at; 
               var $timeStamp = $('<div class="time"></div>');
          
               $user.text('@' + user);
               $user.appendTo($('.main'));

               $tweet.text(' ' + tweet.message);
               $tweet.appendTo($('.main'));
          
               $timeStamp.text(timeStamp);
               $timeStamp.appendTo($('.main'));
             }//end if 
             index -= 1;
           }//end while

        });

        
          var index = streams.home.length - 1;
          while(index >= 0){
            var tweet = streams.home[index];
            var $tweet = $('<span></span>');
          
            var user = tweet.user;
            var $user = $('<span class="user"></span>');

            var timeStamp = tweet.created_at; 
            var $timeStamp = $('<div class="time"></div>');
          
            $user.text('@' + user);
            $user.appendTo($('.main'));

            $tweet.text(' ' + tweet.message);
            $tweet.appendTo($('.main'));
          
            $timeStamp.text(timeStamp);
            $timeStamp.appendTo($('.main'));

            index -= 1;
          
        }

      });

    </script>
  </body>
</html>
